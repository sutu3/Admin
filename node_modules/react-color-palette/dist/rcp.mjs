"use client"
import f,{memo as Z}from"react";function v(t,e){return Array.isArray(t)?t.includes(e):t}import y,{memo as q,useCallback as G,useMemo as H}from"react";import{useCallback as B,useLayoutEffect as j,useMemo as z,useRef as O,useState as W}from"react";function b(){let t=O(null),[e,r]=W(0),o=B(()=>r(i=>i+1),[]);j(()=>{window.addEventListener("resize",o,!1);let i=new ResizeObserver(o);return t.current&&i.observe(t.current),()=>{window.removeEventListener("resize",o,!1),i.disconnect()}},[o]);let n=z(()=>{let{width:i=1,height:c=1}=t.current?.getBoundingClientRect()??{};return{width:i,height:c}},[e]),s=B(()=>{let{left:i=1,right:c=1,top:a=1,bottom:l=1}=t.current?.getBoundingClientRect()??{};return{left:i,right:c,top:a,bottom:l}},[]);return[t,n,s]}function C(t,e,r){return t<e?e:t>r?r:t}var I=class{convert(e,r){let o=this.toHex("#000000"),n=this.hex2rgb(o),s=this.rgb2hsv(n);if(e==="hex"){let i=r;o=this.toHex(i),n=this.hex2rgb(o),o.startsWith("rgba")&&(n=this.toRgb(o),o=this.rgb2hex(n)),s=this.rgb2hsv(n)}else e==="rgb"?(n=r,o=this.rgb2hex(n),s=this.rgb2hsv(n)):e==="hsv"&&(s=r,n=this.hsv2rgb(s),o=this.rgb2hex(n));return{hex:o,rgb:n,hsv:s}}toHex(e){if(e.startsWith("#")){if(e.length===4||e.length===5)return e=e.split("").map((r,o)=>o?o<4?r+r:r==="f"?void 0:r+r:"#").join(""),e;if(e.length===7)return e;if(e.length===9)return e.endsWith("ff")?e.slice(0,7):e}else{let r=document.createElement("canvas").getContext("2d");if(!r)throw new Error("2d context not supported or canvas already initialized");return r.fillStyle=e,r.fillStyle}return"#000000"}toRgb(e){let r=e.match(/\d+(\.\d+)?/gu)??[],[o,n,s,i]=Array.from({length:4}).map((c,a)=>C(+(r[a]??(a<3?0:1)),0,a<3?255:1));return{r:o,g:n,b:s,a:i}}toHsv(e){let r=e.match(/\d+(\.\d+)?/gu)??[],[o,n,s,i]=Array.from({length:4}).map((c,a)=>C(+(r[a]??(a<3?0:1)),0,a?a<3?100:1:360));return{h:o,s:n,v:s,a:i}}hex2rgb(e){e=e.slice(1);let[r,o,n,s]=Array.from({length:4}).map((i,c)=>parseInt(e.slice(c*2,c*2+2),16));return s=Number.isNaN(s)?1:s/255,{r,g:o,b:n,a:s}}rgb2hsv({r:e,g:r,b:o,a:n}){e/=255,r/=255,o/=255;let s=Math.max(e,r,o),i=s-Math.min(e,r,o),c=i?(s===e?(r-o)/i+(r<o?6:0):s===r?2+(o-e)/i:4+(e-r)/i)*60:0,a=s?i/s*100:0,l=s*100;return{h:c,s:a,v:l,a:n}}hsv2rgb({h:e,s:r,v:o,a:n}){r/=100,o/=100;let s=~~(e/60),i=e/60-s,c=o*(1-r),a=o*(1-r*i),l=o*(1-r*(1-i)),u=s%6,p=[o,a,c,c,l,o][u]*255,d=[l,o,o,a,c,c][u]*255,g=[c,c,l,o,o,a][u]*255;return{r:p,g:d,b:g,a:n}}rgb2hex({r:e,g:r,b:o,a:n}){let[s,i,c,a]=[e,r,o,n].map((l,u)=>Math.round(u<3?l:l*255).toString(16).padStart(2,"0"));return["#",s,i,c,a==="ff"?void 0:a].join("")}},m=new I;import _,{memo as X,useCallback as R}from"react";var x=X(({onCoordinateChange:t,children:e})=>{let[r,{width:o,height:n},s]=b(),i=R((a,l=!1)=>{let{left:u,top:p}=s(),d=C(a.clientX-u,0,o),g=C(a.clientY-p,0,n);t(l,d,g)},[o,n,s,t]),c=R(a=>{if(a.button!==0)return;i(a);let l=p=>{i(p)},u=p=>{i(p,!0),document.removeEventListener("pointermove",l,!1),document.removeEventListener("pointerup",u,!1)};document.addEventListener("pointermove",l,!1),document.addEventListener("pointerup",u,!1)},[i]);return _.createElement("div",{ref:r,className:"rcp-interactive",onPointerDown:c},e)});var M=q(({color:t,onChange:e,onChangeComplete:r})=>{let[o,{width:n}]=b(),s=H(()=>({x:t.hsv.a*n}),[t.hsv.a,n]),i=G((l,u)=>{let p=m.convert("hsv",{...t.hsv,a:u/n});e(p),l&&r?.(p)},[t.hsv,n,e,r]),c=H(()=>[t.rgb.r,t.rgb.g,t.rgb.b].join(" "),[t.rgb.r,t.rgb.g,t.rgb.b]),a=H(()=>[c,t.rgb.a].join(" / "),[c,t.rgb.a]);return y.createElement(x,{onCoordinateChange:i},y.createElement("div",{ref:o,style:{background:`linear-gradient(to right, rgb(${c} / 0), rgb(${c} / 1)) top left / auto auto,
                      conic-gradient(#666 0.25turn, #999 0.25turn 0.5turn, #666 0.5turn 0.75turn, #999 0.75turn) top left / 12px 12px
                      repeat`},className:"rcp-alpha"},y.createElement("div",{style:{left:s.x,background:`linear-gradient(to right, rgb(${a}), rgb(${a})) top left / auto auto,
                        conic-gradient(#666 0.25turn, #999 0.25turn 0.5turn, #666 0.5turn 0.75turn, #999 0.75turn) ${-s.x-4}px 2px / 12px 12px
                        repeat`},className:"rcp-alpha-cursor"})))});import h,{memo as U,useCallback as k,useEffect as S,useState as V}from"react";function E(t,e){return Math.round(t*10**e)/10**e}function P({r:t,g:e,b:r,a:o}){let n=[Math.round(t),Math.round(e),Math.round(r)],s=E(o,3);return s<1&&n.push(s),n.join(", ")}function N({h:t,s:e,v:r,a:o}){let n=[`${Math.round(t)}\xB0`,`${Math.round(e)}%`,`${Math.round(r)}%`],s=E(o,3);return s<1&&n.push(s),n.join(", ")}var D=U(({hideInput:t,color:e,onChange:r,onChangeComplete:o})=>{let[n,s]=V({hex:{value:e.hex,inputted:!1},rgb:{value:P(e.rgb),inputted:!1},hsv:{value:N(e.hsv),inputted:!1}});S(()=>{n.hex.inputted||s(l=>({...l,hex:{...l.hex,value:e.hex}}))},[n.hex.inputted,e.hex]),S(()=>{n.rgb.inputted||s(l=>({...l,rgb:{...l.rgb,value:P(e.rgb)}}))},[n.rgb.inputted,e.rgb]),S(()=>{n.hsv.inputted||s(l=>({...l,hsv:{...l.hsv,value:N(e.hsv)}}))},[n.hsv.inputted,e.hsv]);let i=k(l=>u=>{let{value:p}=u.target;s(d=>({...d,[l]:{...d[l],value:p}})),r(l==="hsv"?m.convert("hsv",m.toHsv(p)):l==="rgb"?m.convert("rgb",m.toRgb(p)):m.convert("hex",p))},[r]),c=k(l=>()=>{s(u=>({...u,[l]:{...u[l],inputted:!0}}))},[]),a=k(l=>u=>{let{value:p}=u.target;s(d=>({...d,[l]:{...d[l],inputted:!1}})),o?.(l==="hsv"?m.convert("hsv",m.toHsv(p)):l==="rgb"?m.convert("rgb",m.toRgb(p)):m.convert("hex",p))},[o]);return h.createElement("div",{className:"rcp-fields"},!v(t,"hex")&&h.createElement("div",{className:"rcp-fields-floor"},h.createElement("div",{className:"rcp-field"},h.createElement("input",{id:"hex",className:"rcp-field-input",value:n.hex.value,onChange:i("hex"),onFocus:c("hex"),onBlur:a("hex")}),h.createElement("label",{htmlFor:"hex",className:"rcp-field-label"},"HEX"))),(!v(t,"rgb")||!v(t,"hsv"))&&h.createElement("div",{className:"rcp-fields-floor"},!v(t,"rgb")&&h.createElement("div",{className:"rcp-field"},h.createElement("input",{id:"rgb",className:"rcp-field-input",value:n.rgb.value,onChange:i("rgb"),onFocus:c("rgb"),onBlur:a("rgb")}),h.createElement("label",{htmlFor:"rgb",className:"rcp-field-label"},"RGB")),!v(t,"hsv")&&h.createElement("div",{className:"rcp-field"},h.createElement("input",{id:"hsv",className:"rcp-field-input",value:n.hsv.value,onChange:i("hsv"),onFocus:c("hsv"),onBlur:a("hsv")}),h.createElement("label",{htmlFor:"hsv",className:"rcp-field-label"},"HSV"))))});import T,{memo as Y,useCallback as J,useMemo as $}from"react";var w=Y(({color:t,onChange:e,onChangeComplete:r})=>{let[o,{width:n}]=b(),s=$(()=>({x:t.hsv.h/360*n}),[t.hsv.h,n]),i=J((a,l)=>{let u=m.convert("hsv",{...t.hsv,h:l/n*360});e(u),a&&r?.(u)},[t.hsv,n,e,r]),c=$(()=>[t.hsv.h,"100%","50%"].join(" "),[t.hsv.h]);return T.createElement(x,{onCoordinateChange:i},T.createElement("div",{ref:o,className:"rcp-hue"},T.createElement("div",{style:{left:s.x,backgroundColor:`hsl(${c})`},className:"rcp-hue-cursor"})))});import L,{memo as K,useCallback as Q,useMemo as F}from"react";var A=K(({height:t,color:e,onChange:r,onChangeComplete:o})=>{let[n,{width:s}]=b(),i=F(()=>{let u=e.hsv.s/100*s,p=(100-e.hsv.v)/100*t;return{x:u,y:p}},[e.hsv.s,e.hsv.v,s,t]),c=Q((u,p,d)=>{let g=m.convert("hsv",{...e.hsv,s:p/s*100,v:100-d/t*100});r(g),u&&o?.(g)},[e.hsv,s,t,r,o]),a=F(()=>[e.hsv.h,"100%","50%"].join(" "),[e.hsv.h]),l=F(()=>[e.rgb.r,e.rgb.g,e.rgb.b].join(" "),[e.rgb.r,e.rgb.g,e.rgb.b]);return L.createElement(x,{onCoordinateChange:c},L.createElement("div",{ref:n,style:{height:t,backgroundColor:`hsl(${a})`},className:"rcp-saturation"},L.createElement("div",{style:{left:i.x,top:i.y,backgroundColor:`rgb(${l})`},className:"rcp-saturation-cursor"})))});var ee=Z(({height:t=200,hideAlpha:e=!1,hideInput:r=!1,color:o,onChange:n,onChangeComplete:s})=>f.createElement("div",{className:"rcp-root rcp"},f.createElement(A,{height:t,color:o,onChange:n,onChangeComplete:s}),f.createElement("div",{className:"rcp-body"},f.createElement("section",{className:"rcp-section"},f.createElement(w,{color:o,onChange:n,onChangeComplete:s}),!e&&f.createElement(M,{color:o,onChange:n,onChangeComplete:s})),(!v(r,"hex")||!v(r,"rgb")||!v(r,"hsv"))&&f.createElement("section",{className:"rcp-section"},f.createElement(D,{hideInput:r,color:o,onChange:n,onChangeComplete:s})))));import{useEffect as re,useState as oe}from"react";function te(t){let[e,r]=oe(m.convert("hex",t));return re(()=>{r(m.convert("hex",t))},[t]),[e,r]}export{M as Alpha,ee as ColorPicker,m as ColorService,w as Hue,A as Saturation,te as useColor};
